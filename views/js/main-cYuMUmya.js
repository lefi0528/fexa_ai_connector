/**
 * Copyright (c) 2025 PrestaShop SA
 *
 * All Rights Reserved.
 *
 * This module is proprietary software owned by PrestaShop SA. All intellectual property rights, including copyrights, trademarks, and trade secrets, are reserved by PrestaShop SA.
 *
 * The PS MCP Server module was developed by PrestaShop, which holds all associated intellectual property rights. The license granted to the user does not entail any transfer of rights. The user shall refrain from any act that may infringe upon PrestaShop's rights and undertakes to strictly comply with the limitations of the license set out below. PrestaShop grants the user a personal, non-exclusive, non-transferable, and non-sublicensable license to use the MCP Server module, worldwide and for the entire duration of use of the module. This license is strictly limited to installing the module and using it solely for the operation of the user's PrestaShop store.
 */
import{c as ce,d as re,s as j,I as le,a as y,w as p,b as s,r as X,n as K,e as _,f as N,t as c,o as R,g as u,h as r,u as i,i as U,j as v,k as q,l as P,m as w,p as z,q as Y,v as F,_ as x,F as O,x as D,y as ee,z as te,A as V,B as de,C as ue,D as pe,E as me,G as he,H as be,J as _e,K as fe,L as ge,M as H,N as ve,O as ye,P as Se,Q as ke,R as $e,S as Te,T as we,U as Ae,V as Oe,W as Ce,X as Ie,Y as Le,Z as Ee}from"./vendor-ByHORLBT.js";const De="modulepreload",Ue=function(t){return"/"+t},Q={},J=function(e,n,a){let d=Promise.resolve();if(n&&n.length>0){let m=function(l){return Promise.all(l.map(f=>Promise.resolve(f).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),o=g?.nonce||g?.getAttribute("nonce");d=m(n.map(l=>{if(l=Ue(l),l in Q)return;Q[l]=!0;const f=l.endsWith(".css"),k=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${k}`))return;const C=document.createElement("link");if(C.rel=f?"stylesheet":De,f||(C.as="script"),C.crossOrigin="",C.href=l,o&&C.setAttribute("nonce",o),document.head.appendChild(C),f)return new Promise((ae,ie)=>{C.addEventListener("load",ae),C.addEventListener("error",()=>ie(new Error(`Unable to preload CSS for ${l}`)))})}))}function b(g){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=g,window.dispatchEvent(o),!o.defaultPrevented)throw g}return d.then(g=>{for(const o of g||[])o.status==="rejected"&&b(o.reason);return e().catch(b)})},Pe=(t,e,n)=>{const a=t[e];return a?typeof a=="function"?a():Promise.resolve(a):new Promise((d,b)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(b.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})};let ne=[];const W=window.mcpConfig.isoCode?window.mcpConfig.isoCode:"en";ne[W]={currency:{style:"currency",currency:window.currencyIsoCode,maximumFractionDigits:2},percent:{style:"percent",useGrouping:!0},number:{style:"decimal"}};async function Ne(t,e){let n;try{t.global.availableLocales.includes(e)||(n=await Pe(Object.assign({"../translations/en.json":()=>J(()=>import("./translations/en-BBBFkOFl.js"),[]),"../translations/fr.json":()=>J(()=>import("./translations/fr-CAu4OVq0.js"),[])}),`../translations/${e}.json`,3),t.global.setLocaleMessage(e,n.default))}catch{t.global.availableLocales.includes(e)||(n=await J(()=>import("./translations/en-BBBFkOFl.js"),[]),t.global.setLocaleMessage(e,n.default))}}const G=ce({locale:W,numberFormats:ne,fallbackLocale:"en",globalInjection:!0,messages:{}});Ne(G,W);const{t:h}=G.global,{isoCode:je,dependenciesState:I,accountOnboarded:Me,mcpAjaxPath:Ve,cloudSyncAlreadyOnboarded:Re,mcpHotCachingEnabled:Be,mcpLogsEnabled:He,mcpServerRunning:Je,mcpUrl:qe,shopEmployees:ze,allowedUsers:Fe,readme:We,modulesTools:Ge}=window.mcpConfig,L={ps_mbo:"4.12.0",ps_mcp_tools:"0.1.0",ps_eventbus:"4.0.13",ps_accounts:"8.0.4"},$=re("global",{state:()=>({isoCode:je,dependenciesState:{ps_mbo:{...I.ps_mbo,requiredVersion:L.ps_mbo,isUpToDate:j(I.ps_mbo?.version??"0.0.0",L.ps_mbo)},ps_mcp_tools:{...I.ps_mcp_tools,requiredVersion:L.ps_mcp_tools,isUpToDate:j(I.ps_mcp_tools?.version??"0.0.0",L.ps_mcp_tools)},ps_eventbus:{...I.ps_eventbus,requiredVersion:L.ps_eventbus,isUpToDate:j(I.ps_eventbus?.version??"0.0.0",L.ps_eventbus)},ps_accounts:{...I.ps_accounts,requiredVersion:L.ps_accounts,isUpToDate:j(I.ps_accounts?.version??"0.0.0",L.ps_accounts)}},accountOnboarded:Me,mcpAjaxPath:Ve,cloudSyncAlreadyOnboarded:Re,mcpHotCachingEnabled:Be,mcpLogsEnabled:He,mcpServerRunning:Je,mcpUrl:qe,shopEmployees:ze,allowedUsers:Fe,readme:We,modulesTools:Ge,onboardingComplete:!1,notificationsList:[]}),getters:{allDependenciesOk(){const t=this.dependenciesState.ps_mbo.installState=="installed"&&this.dependenciesState.ps_mbo.isUpToDate,e=this.dependenciesState.ps_mcp_tools.installState=="installed"&&this.dependenciesState.ps_mcp_tools.isUpToDate,n=this.dependenciesState.ps_eventbus.installState=="installed"&&this.dependenciesState.ps_eventbus.isUpToDate,a=this.dependenciesState.ps_accounts.installState=="installed"&&this.dependenciesState.ps_accounts.isUpToDate,d=this.accountOnboarded;return t&&e&&n&&a&&d}},actions:{async installDependency(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"installDependency",moduleName:t})}).then(e=>e.json()).then(e=>(this.refreshDependencyState(e.module_info),e))},async enableDependency(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"enableDependency",moduleName:t})}).then(e=>e.json()).then(e=>(this.refreshDependencyState(e.module_info),e))},async upgradeDependency(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"upgradeDependency",moduleName:t})}).then(e=>e.json()).then(e=>(this.refreshDependencyState(e.module_info),e))},refreshDependencyState(t){const{technicalName:e}=t;this.dependenciesState[e]&&(this.dependenciesState[e]={...t},this.dependenciesState[e].isUpToDate=!0)},async fetchAccountsContext(){return await fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"fetchAccountsContext"})}).then(t=>t.json()).then(t=>{window.contextPsAccounts=t.context})},async switchMcpServer(){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"switchMcpServer"})}).then(t=>t.json()).then(t=>{if(t.status!=="success")throw new Error(t.message);return this.mcpServerRunning=t.mcp_running,this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.mcpServerSwitch",{state:t.mcp_running?h("snackbar.common.enabled"):h("snackbar.common.disabled")}),"success"),t}).catch(t=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),t.message||"An unexpected error occurred","danger"),t})},async updateTools(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"updateTools",...t})}).then(e=>e.json()).then(e=>{if(e.status!=="success")throw new Error(e.message);return this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.tools",{number:e.toolsCount,state:e.toolsState?h("snackbar.common.enabled"):h("snackbar.common.disabled")}),"success"),e}).catch(e=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),e.message||"An unexpected error occurred","danger"),e})},async relaunchDiscover(){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"saveSettings",setting:"relaunch_discover_modules_and_tools",value:!0})}).then(t=>t.json()).then(t=>{if(t.status!=="success")throw new Error(t.message);return this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.discoveryComplete",{state:t.mcp_running?h("snackbar.common.enabled"):h("snackbar.common.disabled")}),"success"),t}).catch(t=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),t.message||"An unexpected error occurred","danger"),t})},async enableHotCaching(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"saveSettings",setting:"mcp_hot_caching_enabled",value:t})}).then(e=>e.json()).then(e=>{if(e.status!=="success")throw new Error(e.message);return this.mcpHotCachingEnabled=!!t,this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.hotCachingSwitch",{state:h(t?"snackbar.common.enabled":"snackbar.common.disabled")}),"success"),e}).catch(e=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),e.message||"An unexpected error occurred","danger"),e})},async enableLogs(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"saveSettings",setting:"mcp_logs_enabled",value:t})}).then(e=>e.json()).then(e=>{if(e.status!=="success")throw new Error(e.message);return this.mcpLogsEnabled=!!t,this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.logsSwitch",{state:h(t?"snackbar.common.enabled":"snackbar.common.disabled")}),"success"),e}).catch(e=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),e.message||"An unexpected error occurred","danger"),e})},async addAllowedUser(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"addAllowedUser",email:t})}).then(e=>e.json()).then(e=>{if(e.status!=="success")throw new Error(e.message);return e.employee_added&&(this.allowedUsers.push(e.employee_added),this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.membersListUpdated",{member:e.employee_added.email,state:h("snackbar.common.added")}),"success")),e}).catch(e=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),e.message||"An unexpected error occurred","danger"),e})},async deleteAllowedUser(t){return fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"deleteAllowedUser",email:t})}).then(e=>e.json()).then(e=>{if(e.status!=="success")throw new Error(e.message);return this.allowedUsers=this.allowedUsers.filter(n=>n.email!==t),this.addSnackbar(h("snackbar.common.changeSaveSuccessfully"),h("snackbar.membersListUpdated",{member:t,state:h("snackbar.common.removed")}),"success"),e}).catch(e=>{throw this.addSnackbar(h("snackbar.common.anErrorOccured"),e.message||"An unexpected error occurred","danger"),e})},async addOnboardedEmailToMembers(){try{const e=await(await fetch(this.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"addOnboardedEmailToMembers"})})).json();return e.status==="success"&&e.employee_added&&this.allowedUsers.push(e.employee_added),e}catch(t){return{status:"error",message:t.message}}},addSnackbar(t="title",e="description",n="success"){const{snackbarsState:a,removeSnackbar:d}=le({title:t,description:e,hasCloseButton:!0,variant:n,onOpenChange:b=>{b||(this.notificationsList=d(this.notificationsList))}},this.notificationsList,3,2e3);this.notificationsList=a}}}),S=(t,e)=>{const n=t.__vccOpts||t;for(const[a,d]of e)n[a]=d;return n},Ze={key:0,class:"puik-h3 mcp-card-title"},Ke={key:1,class:"mcp-card-description"},Qe={__name:"mcp-card",props:{title:{type:String,required:!0},description:{type:String,default:""},parentAdditionalClasses:{type:String,default:""},headerAdditionalClasses:{type:String,default:""}},setup(t){return(e,n)=>{const a=R;return u(),y(a,{class:"mcp-card"},{default:p(()=>[s("div",{class:K(t.parentAdditionalClasses)},[s("div",{class:K(t.headerAdditionalClasses)},[t.title?(u(),_("h3",Ze,c(t.title),1)):N("",!0),t.description?(u(),_("p",Ke,c(t.description),1)):N("",!0)],2),X(e.$slots,"default",{},void 0,!0)],2)]),_:3})}}},A=S(Qe,[["__scopeId","data-v-29c5c588"]]),Xe=["innerHTML"],Ye={__name:"mcp-feedback",setup(t){return(e,n)=>(u(),y(A,{title:e.$t("feedback.title"),id:"feedback"},{default:p(()=>[s("p",{innerHTML:e.$t("feedback.description")},null,8,Xe),r(i(U),{"right-icon":"open_in_new",variant:"secondary",href:"https://forms.gle/ixDQWg5NSr1RRMLK7",target:"_blank",rel:"noopener"},{default:p(()=>[v(c(e.$t("feedback.button")),1)]),_:1})]),_:1},8,["title"]))}},se=S(Ye,[["__scopeId","data-v-54ca122d"]]),xe={},et={class:"mcp-footer"},tt={class:"mcp-footer-content"};function nt(t,e){return u(),_("footer",et,[s("div",tt,[X(t.$slots,"default",{},void 0,!0)]),e[0]||(e[0]=s("div",{class:"mcp-footer-copyright"},"Copyright (c) PrestaShop SA. All Rights Reserved.",-1))])}const E=S(xe,[["render",nt],["__scopeId","data-v-49869b8f"]]),st={class:"mcp-configuration-page"},ot={class:"flex-card-beetwen"},at={class:"puik-h5"},it={class:"input-group"},ct=["value"],rt={class:"puik-h5 mt-3"},lt={__name:"configuration",setup(t){const e=$();function n(a){navigator.clipboard.writeText(a)}return(a,d)=>(u(),_("div",st,[r(A,{title:a.$t("pages.homepage.status.title")},{default:p(()=>[s("div",ot,[s("span",null,c(a.$t("pages.homepage.status.description")),1),r(i(q),{id:"mcp-server-switch",onClick:d[0]||(d[0]=b=>i(e).switchMcpServer()),"model-value":i(e).mcpServerRunning?"true":"false"},null,8,["model-value"])])]),_:1},8,["title"]),r(A,{title:a.$t("pages.homepage.connection.title")},{default:p(()=>[s("div",null,[s("p",null,[v(c(a.$t("pages.homepage.connection.description"))+" ",1),d[2]||(d[2]=s("br",null,null,-1)),r(i(P),{href:a.$t("pages.homepage.connection.linkUrl"),target:"_blank"},{default:p(()=>[v(c(a.$t("pages.homepage.connection.step")),1)]),_:1},8,["href"])])]),s("div",null,[s("h5",at,c(a.$t("pages.homepage.connection.urlLabel")),1),s("div",it,[s("input",{type:"text",class:"puik-input__field col-9",value:i(e).mcpUrl,readonly:""},null,8,ct),r(i(U),{variant:"secondary","left-icon":"content_copy",size:"md",onClick:d[1]||(d[1]=b=>n(i(e).mcpUrl))},{default:p(()=>[v(c(a.$t("pages.homepage.connection.copyButton")),1)]),_:1})])]),s("div",null,[s("h5",rt,c(a.$t("pages.homepage.connection.authenticationMethod")),1),d[3]||(d[3]=s("input",{type:"text",class:"puik-input__field col-9",value:"OAuth 2.0",readonly:""},null,-1))])]),_:1},8,["title"]),r(E,null,{default:p(()=>[r(se)]),_:1})]))}},dt=S(lt,[["__scopeId","data-v-38c13945"]]),ut={id:"tools-list-page"},pt={class:"flex-label"},mt={key:0},ht={key:1},bt={id:"footer-tools-list",class:"row"},_t={__name:"tools-list",setup(t){const e=Y(),n=z(),a=$();function d(o){return o.trim().replace(/[^a-zA-Z0-9\s]/g," ").replace(/\s+/g," ")}const b=w(()=>{const o=Number(n.params.moduleId),m=a.modulesTools.findIndex(l=>Number(l.module_id)===o);return m>=0?m+1:1});function g(o){const m=a.modulesTools[o-1];m&&e.push({name:"moduleTools",params:{moduleId:m.module_id.toString()}})}return(o,m)=>{const l=F("RouterView");return u(),_("div",ut,[r(A,{title:o.$t("pages.toolsList.title")},{default:p(()=>[s("div",pt,[s("span",null,c(o.$t("pages.toolsList.descriptionOne")),1),s("span",null,c(o.$t("pages.toolsList.descriptionTwo")),1)]),i(a).modulesTools.length?(u(),_("div",mt,[r(i(x),{name:"tools-navigation","default-position":b.value,onChangeActiveTab:g},{default:p(()=>[(u(!0),_(O,null,D(i(a).modulesTools,(f,k)=>(u(),y(i(ee),{key:f.module_id,"aria-label":"navigation"},{default:p(()=>[r(i(te),{position:k+1},{default:p(()=>[v(c(d(f.module_name).toUpperCase()),1)]),_:2},1032,["position"])]),_:2},1024))),128))]),_:1},8,["default-position"]),r(l)])):(u(),_("div",ht,[s("p",null,c(o.$t("pages.toolsList.noResult")),1)]))]),_:1},8,["title"]),r(E,null,{default:p(()=>[s("div",bt,[r(A,{title:o.$t("pages.toolsList.helpArticle.title"),description:o.$t("pages.toolsList.helpArticle.description"),id:"help-article-card",class:"col-5"},{default:p(()=>[r(i(P),{href:o.$t("pages.toolsList.helpArticle.linkUrl"),target:"_blank",rel:"noopener"},{default:p(()=>[v(c(o.$t("pages.toolsList.helpArticle.link")),1)]),_:1},8,["href"])]),_:1},8,["title","description"]),r(se,{class:"col-5"})])]),_:1})])}}},ft=S(_t,[["__scopeId","data-v-9c4051f3"]]),gt={class:"tools-list"},vt={id:"tool-name-and-description"},yt={class:"puik-h5"},St={__name:"module-tools",props:{moduleId:{type:String,required:!0}},setup(t){const e=t,n=$(),a=w(()=>n.modulesTools.find(o=>o.module_id==e.moduleId));function d(o){return o.trim().replace(/[^a-zA-Z0-9\s]/g," ").replace(/\s+/g," ")}function b(o){return o.charAt(0).toUpperCase()+o.slice(1)}async function g(o,m){o.is_active=m,await n.updateTools({tools_info:[{name:o.name,moduleId:o.module_id}],is_active:m})}return(o,m)=>(u(),_("div",gt,[(u(!0),_(O,null,D(a.value?.tools,l=>(u(),y(i(R),{key:l.name,class:"tool-item"},{default:p(()=>[s("div",vt,[s("h5",yt,c(b(d(l.name))),1),s("span",null,c(l.description),1)]),r(i(q),{onClick:f=>g(l,!l.is_active),"model-value":l.is_active,class:"puik-body-default-bold label-switch-tool"},{default:p(()=>[v(c(l.is_active?o.$t("pages.toolsList.enabled"):o.$t("pages.toolsList.disabled")),1)]),_:2},1032,["onClick","model-value"])]),_:2},1024))),128))]))}},kt=S(St,[["__scopeId","data-v-02825e70"]]),$t={class:"puik-h3 page-members-title"},Tt={class:"page-members-description"},wt={class:"employee-search-container"},At={key:0,class:"search-employees-result"},Ot=["onClick"],Ct={class:"mcp-members-list"},It={class:"right-element"},Lt={__name:"members",setup(t){const e=$(),n=V(""),a=V(!1);de(()=>{e.addOnboardedEmailToMembers()}),ue(n,()=>{a.value=!0});const d=w(()=>{const o=n.value.trim().toLowerCase();return o?e.shopEmployees.filter(m=>m.email.toLowerCase().includes(o)).slice(0,5):[]}),b=async o=>{n.value=o,await he(),a.value=!1},g=async()=>{try{await e.addAllowedUser(n.value),n.value=""}catch{}};return(o,m)=>(u(),_("div",null,[s("h3",$t,c(o.$t("pages.members.title")),1),s("p",Tt,c(o.$t("pages.members.description")),1),r(A,{title:o.$t("pages.members.addMember.title"),description:o.$t("pages.members.addMember.description")},{default:p(()=>[s("div",wt,[r(i(pe),{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=l=>n.value=l),type:"search",placeholder:o.$t("pages.members.addMember.input.placeholder"),autocomplete:"off"},null,8,["modelValue","placeholder"]),a.value?(u(),_("div",At,[(u(!0),_(O,null,D(d.value,l=>(u(),_("div",{key:l.id_employee,onClick:f=>b(l.email),class:"search-employees-result__item"},c(l.email),9,Ot))),128))])):N("",!0),r(i(U),{class:"add-button","left-icon":"person_add",onClick:g},{default:p(()=>[v(c(o.$t("pages.members.addMember.addButton")),1)]),_:1})])]),_:1},8,["title","description"]),r(A,{title:o.$t("pages.members.currentMembers.title"),description:o.$t("pages.members.currentMembers.description",i(e).allowedUsers.length,{count:i(e).allowedUsers.length})},{default:p(()=>[s("div",Ct,[(u(!0),_(O,null,D(i(e).allowedUsers,l=>(u(),y(i(R),{key:l.email,class:"mcp-member"},{default:p(()=>[s("span",null,c(l.email),1),s("div",It,[s("span",null,c(o.$t("pages.members.currentMembers.addedAt",{date:l.created_at})),1),r(i(me),{class:"delete-icon",icon:"delete","aria-label":o.$t("pages.members.currentMembers.deleteButton"),"font-size":"16px",color:"#dddddd",onClick:f=>i(e).deleteAllowedUser(l.email)},null,8,["aria-label","onClick"])])]),_:2},1024))),128))])]),_:1},8,["title","description"]),r(E)]))}},Et=S(Lt,[["__scopeId","data-v-aaf1d386"]]),Dt={class:"developer-options-page"},Ut={class:"mcp-find-compatible-modules flex-card-beetwen"},Pt={class:"flex-label"},Nt={class:"mcp-development-options"},jt={id:"mcp-enable-hot-caching"},Mt={id:"mcp-enable-logs"},Vt={__name:"developer-options",setup(t){const e=$();return(n,a)=>{const d=q;return u(),_("div",Dt,[r(A,{title:n.$t("pages.developer.scanTools.title")},{default:p(()=>[s("div",Ut,[s("div",Pt,[s("span",null,c(n.$t("pages.developer.scanTools.descriptionOne")),1),s("span",null,c(n.$t("pages.developer.scanTools.descriptionTwo")),1)]),r(i(U),{onClick:a[0]||(a[0]=b=>i(e).relaunchDiscover())},{default:p(()=>[v(c(n.$t("pages.developer.scanTools.cta")),1)]),_:1})])]),_:1},8,["title"]),r(A,{title:n.$t("pages.developer.developmentOptions.title"),description:n.$t("pages.developer.developmentOptions.description")},{default:p(()=>[s("div",Nt,[s("div",jt,[r(d,{modelValue:i(e).mcpHotCachingEnabled,"onUpdate:modelValue":[a[1]||(a[1]=b=>i(e).mcpHotCachingEnabled=b),a[2]||(a[2]=b=>i(e).enableHotCaching(i(e).mcpHotCachingEnabled))],label:n.$t("pages.developer.developmentOptions.enableHotCaching.title")},null,8,["modelValue","label"]),s("small",null,c(n.$t("pages.developer.developmentOptions.enableHotCaching.descriptionOne")),1),a[5]||(a[5]=s("br",null,null,-1)),s("small",null,c(n.$t("pages.developer.developmentOptions.enableHotCaching.descriptionTwo")),1)]),s("div",Mt,[r(d,{modelValue:i(e).mcpLogsEnabled,"onUpdate:modelValue":[a[3]||(a[3]=b=>i(e).mcpLogsEnabled=b),a[4]||(a[4]=b=>i(e).enableLogs(i(e).mcpLogsEnabled))],label:n.$t("pages.developer.developmentOptions.enableLogs.title")},null,8,["modelValue","label"]),s("small",null,c(n.$t("pages.developer.developmentOptions.enableLogs.description")),1)])])]),_:1},8,["title","description"]),r(E)])}}},oe={__name:"accounts-wrapper",setup(t){const e=$();return be(async()=>{window.contextPsAccounts||await e.fetchAccountsContext(),window?.psaccountsVue?.init(),e.accountOnboarded=window?.psaccountsVue?.isOnboardingCompleted()}),(n,a)=>{const d=F("prestashop-accounts");return u(),y(d)}}},Rt={class:"consents-page"},Bt={__name:"consents",setup(t){return(e,n)=>(u(),_("div",Rt,[r(oe),r(E)]))}},Ht={class:"documentation-page"},Jt={class:"links-container"},qt={__name:"documentation",setup(t){return(e,n)=>(u(),_("div",Ht,[r(A,{title:e.$t("pages.documentation.title"),description:e.$t("pages.documentation.description")},{default:p(()=>[s("div",Jt,[r(i(P),{href:e.$t("pages.documentation.introductionUrl"),target:"_blank"},{default:p(()=>[v(c(e.$t("pages.documentation.introduction")),1)]),_:1},8,["href"]),n[0]||(n[0]=s("br",null,null,-1)),r(i(P),{href:e.$t("pages.documentation.connectUrl"),target:"_blank"},{default:p(()=>[v(c(e.$t("pages.documentation.connect")),1)]),_:1},8,["href"]),n[1]||(n[1]=s("br",null,null,-1)),r(i(P),{href:e.$t("pages.documentation.createToolsUrl"),target:"_blank"},{default:p(()=>[v(c(e.$t("pages.documentation.createTools")),1)]),_:1},8,["href"])])]),_:1},8,["title","description"]),r(E)]))}},zt=S(qt,[["__scopeId","data-v-3ce0934f"]]),T={INSTALLED:"installed",UNINSTALLED:"uninstalled",DISABLED:"disabled",UPDATE_AVAILABLE:"updateAvailable"},Ft={class:"module-info"},Wt=["src"],Gt={class:"module-title-and-state"},Zt={class:"puik-h3"},Kt={__name:"dependencie-state",props:{moduleInfo:{type:Object,required:!0}},setup(t){const{t:e}=_e(),n=V(!1),a=$(),d=t,b=w(()=>{switch(d.moduleInfo.installState){case T.INSTALLED:return"success";case T.DISABLED:case T.UNINSTALLED:case T.UPDATE_AVAILABLE:return"info";default:return"neutral"}}),g=async()=>{let o=null;n.value=!0,d.moduleInfo.installState===T.UNINSTALLED?o=a.installDependency(d.moduleInfo.technicalName):d.moduleInfo.installState===T.DISABLED?o=a.enableDependency(d.moduleInfo.technicalName):d.moduleInfo.isUpToDate||(o=a.upgradeDependency(d.moduleInfo.technicalName)),await o.then(()=>{d.moduleInfo.technicalName=="ps_accounts"&&!window.contextPsAccounts&&a.fetchAccountsContext()}).catch(()=>{a.addSnackbar(e("snackbar.common.anErrorOccured"),e("snackbar.common.actionOnModuleFailed",{moduleName:d.moduleInfo.name}),"danger")}).finally(()=>{n.value=!1})};return(o,m)=>{const l=U;return u(),y(i(R),{class:"module-card"},{default:p(()=>[s("div",Ft,[s("img",{src:t.moduleInfo.logo,alt:"Module logo",class:"module-logo"},null,8,Wt),s("div",null,[s("div",Gt,[s("h3",Zt,c(t.moduleInfo.name),1),r(i(fe),{variant:b.value},{default:p(()=>[v(c(t.moduleInfo.installState),1)]),_:1},8,["variant"])]),s("span",null,c(o.$t(`pages.onboarding.modules.explainWhy.${t.moduleInfo.technicalName}`)),1)])]),t.moduleInfo.installState===i(T).UNINSTALLED||t.moduleInfo.installState===i(T).DISABLED||!t.moduleInfo.isUpToDate?(u(),y(l,{key:0,variant:"secondary",onClick:g,loading:n.value},{default:p(()=>[t.moduleInfo.installState===i(T).UNINSTALLED?(u(),_(O,{key:0},[v(c(o.$t("pages.onboarding.modules.actions.install",{moduleName:t.moduleInfo.name})),1)],64)):t.moduleInfo.installState===i(T).DISABLED?(u(),_(O,{key:1},[v(c(o.$t("pages.onboarding.modules.actions.enable",{moduleName:t.moduleInfo.name})),1)],64)):(u(),_(O,{key:2},[v(c(o.$t("pages.onboarding.modules.actions.update",{moduleName:t.moduleInfo.name})),1)],64))]),_:1},8,["loading"])):N("",!0)]),_:1})}}},M=S(Kt,[["__scopeId","data-v-32f572c5"]]),Qt={class:"onboarding-page"},Xt={class:"stepper-container"},Yt={key:0,class:"module-dependencies"},xt={class:"puik-h2"},en={key:1,class:"module-dependencies"},tn={class:"puik-h2"},nn={key:2},sn={class:"puik-h2"},on={__name:"onboarding",setup(t){const e=$(),n=V(1),a=w(()=>e.dependenciesState.ps_mbo.installState==="installed"&&e.dependenciesState.ps_mbo.isUpToDate),d=w(()=>e.dependenciesState.ps_accounts.installState==="installed"&&e.dependenciesState.ps_accounts.isUpToDate&&e.dependenciesState.ps_eventbus.installState==="installed"&&e.dependenciesState.ps_eventbus.isUpToDate&&e.dependenciesState.ps_mcp_tools.installState==="installed"&&e.dependenciesState.ps_mcp_tools.isUpToDate),b=w(()=>e.accountOnboarded),g=w(()=>{switch(n.value){case 1:return a.value;case 2:return d.value;case 3:return b.value;default:return!1}});function o(){n.value<3?n.value+=1:Z.push({name:"configuration"})}return(m,l)=>{const f=U;return u(),_("div",Qt,[s("div",Xt,[r(i(ge),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=k=>n.value=k),id:"mcp-progress-stepper"},{default:p(()=>[r(i(H),{step:1},{"additional-text":p(()=>[v(c(m.$t("pages.onboarding.steps.step1.bubbleText")),1)]),_:1}),r(i(H),{step:2},{"additional-text":p(()=>[v(c(m.$t("pages.onboarding.steps.step2.bubbleText")),1)]),_:1}),r(i(H),{step:3},{"additional-text":p(()=>[v(c(m.$t("pages.onboarding.steps.step3.bubbleText")),1)]),_:1})]),_:1},8,["modelValue"])]),n.value===1?(u(),_("div",Yt,[s("h2",xt,c(m.$t("pages.onboarding.steps.step1.title")),1),s("p",null,c(m.$t("pages.onboarding.steps.step1.description")),1),r(M,{"module-info":i(e).dependenciesState.ps_mbo},null,8,["module-info"])])):n.value===2?(u(),_("div",en,[s("h2",tn,c(m.$t("pages.onboarding.steps.step2.title")),1),s("p",null,c(m.$t("pages.onboarding.steps.step2.description")),1),r(M,{"module-info":i(e).dependenciesState.ps_accounts},null,8,["module-info"]),r(M,{"module-info":i(e).dependenciesState.ps_eventbus},null,8,["module-info"]),r(M,{"module-info":i(e).dependenciesState.ps_mcp_tools},null,8,["module-info"])])):(u(),_("div",nn,[s("h2",sn,c(m.$t("pages.onboarding.steps.step3.title")),1),s("p",null,c(m.$t("pages.onboarding.steps.step3.description")),1),r(oe)])),r(f,{disabled:!g.value,onClick:o,id:"next-step-button"},{default:p(()=>[v(c(m.$t("pages.onboarding.steps.ctaButton")),1)]),_:1},8,["disabled"]),r(E)])}}},an=S(on,[["__scopeId","data-v-8df910be"]]),cn=[{path:"/",redirect:"/configuration"},{path:"/configuration",name:"configuration",component:dt},{path:"/tools-list",name:"toolsList",component:ft,children:[{path:"/tools-list/:moduleId",name:"moduleTools",component:kt,props:!0}]},{path:"/members",name:"members",component:Et},{path:"/developer-options",name:"developerOptions",component:Vt},{path:"/account",name:"account",component:Bt},{path:"/documentation",name:"documentation",component:zt},{path:"/onboarding",name:"onboarding",component:an}],Z=ve({history:ye(),routes:cn});Z.beforeEach(async(t,e)=>{const n=$();if(n.allDependenciesOk){if(t.name==="onboarding"&&n.allDependenciesOk)return n.addOnboardedEmailToMembers(),{name:"configuration"}}else if(t.name!=="onboarding")return{name:"onboarding"};n.allDependenciesOk&&!n.cloudSyncAlreadyOnboarded&&(await(await fetch(n.mcpAjaxPath,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"sendCloudSyncConsent"})})).json()).status==="success"&&(n.cloudSyncAlreadyOnboarded=!0)});const rn={__name:"navigation-bar",setup(t){const e=Y(),n=z(),a=$(),d=["configuration","toolsList","members","developerOptions","account","documentation"],b=w(()=>{const m=e.getRoutes();return d.map((l,f)=>m.find(k=>k.name===l)).filter(Boolean).map((l,f)=>({...l,position:f}))}),g=w(()=>{const m=b.value.find(l=>l.name===n.name);return m?Number(m.position):-1});function o(m){const l=b.value.find(f=>f.position===m);if(l&&l.name!==n.name){if(l.name==="toolsList"){const f=a.modulesTools[0]?.module_id;if(f)return e.push({name:"moduleTools",params:{moduleId:f.toString()}})}e.push({name:l.name})}}return(m,l)=>(u(),y(i(x),{name:"app-navigation",id:"mcp-tabs",key:g.value,"default-position":g.value,onChangeActiveTab:o},{default:p(()=>[r(i(ee),{"aria-label":"navigation"},{default:p(()=>[(u(!0),_(O,null,D(b.value,f=>(u(),y(i(te),{key:f.path,position:f.position},{default:p(()=>[v(c(m.$t(`tabs.${f.name}`)),1)]),_:2},1032,["position"]))),128))]),_:1})]),_:1},8,["default-position"]))}},ln=S(rn,[["__scopeId","data-v-7a58d8bd"]]),dn={},un=["aria-labelledby"],pn={class:"puik-breadcrumb",role:"navigation"},mn={class:"puik-breadcrumb__item"},hn={href:"#",target:"_self",class:"puik-link puik-link--sm puik-breadcrumb__item-link"},bn={class:"puik-breadcrumb__item--last"},_n={class:"puik-h1"},fn={class:"header-description"},gn={class:"puik-body-default"},vn={class:"puik-body-default"};function yn(t,e){const n=Se;return u(),_("header",{id:"header-panel",role:"banner","aria-labelledby":t.$t("header.title")},[r(n),s("nav",pn,[e[1]||(e[1]=s("div",{class:"puik-icon material-icons-round puik-breadcrumb__home-icon"},"home",-1)),s("div",mn,[s("a",hn,c(t.$t("breadcrumb.modules")),1),e[0]||(e[0]=s("div",{class:"puik-icon material-icons-round puik-breadcrumb__item-icon"},"keyboard_arrow_right",-1))]),s("div",bn,c(t.$t("breadcrumb.mcp")),1)]),s("h1",_n,c(t.$t("header.title")),1),s("div",fn,[s("span",gn,c(t.$t("header.descriptionOne")),1),e[2]||(e[2]=s("br",null,null,-1)),s("span",vn,c(t.$t("header.descriptionTwo")),1)])],8,un)}const Sn=S(dn,[["render",yn],["__scopeId","data-v-98b175a4"]]),kn={__name:"index",setup(t){const e=$(),n=z();return(a,d)=>{const b=F("RouterView");return u(),_("div",null,[r(Sn),i(e).allDependenciesOk&&i(n).name!="onboarding"?(u(),y(ln,{key:0})):N("",!0),r(b,{id:"router-view"}),r(i(Te),ke($e(a.snackbarProviderArgs)),{default:p(()=>[(u(!0),_(O,null,D(i(e).notificationsList,g=>(u(),y(i(we),Ae({key:g.id},{ref_for:!0},g),Oe({_:2},[Ce(g.action)?{name:"action",fn:p(()=>[(u(),y(Ie(g.action)))]),key:"0"}:void 0]),1040))),128))]),_:1},16)])}}},B=Le(kn),$n=Ee();B.use($n);B.use(Z);B.use(G);B.mount("#vue-app");
